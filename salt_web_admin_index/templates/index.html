{% extends 'base.html' %}
{# coding=utf8 #}
{% load i18n %}
{% block sidebar%}
<div class="row-fluid">
    <a style="width:120px;" class="btn btn-inverse "><strong>远程实时命令</strong></a>
</div>
<hr/>

{% endblock %}
{% block sidebarreboot%}
<div class="row-fluid">
    <a style="width:120px;" class="btn btn-inverse "><strong>服务管理</strong></a>
</div>
<hr/>

{% endblock %}

{% block sidebarfileupdate%}
<div class="row-fluid">
    <a style="width:120px;" class="btn btn-inverse "><strong>配置文件管理</strong></a>
</div>
<hr/>

{% endblock %}
{% block body %}

<style>
.fs20 {
   font-size: 20px;
}
.torange {
        color: #666600;
}
.cut-line {
        color: #D6D6D6;
        margin: 0 5px;
}
.mt20 {
        margin-top: 20px;
}
.dt{
    color: #666666;
    float: left;
    font-weight: normal;
    overflow: hidden;
    padding: 2px 18px 6px 0;
    text-align: right;
    width: 200px;
    font-size:14px;
}
.common-loading-img {
    left: 50%;
    margin: -64px 0 0 -64px;
    position: absolute;
    top: 50%;
    z-index: 9999;
}

</style>
<script>
$(function(){
  $("#execute").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/execute",
          data : $("#form-execute").serialize(),
          success: function(data){
              $("#instances").html(data);
          }
      });
  })
})
</script>
<div class='row'>
    <div class='span10'>
            <form class="form-inline" id="form-execute" style="margin-bottom:0;">{% csrf_token %}
                <select id="ide" name="tgt">
                    <option value="waiwei" selected="selected">all waiwei servers</option>
                    <option value="hexin">all hexin servers</option>
                    <option value="changsha">changsha servers</option>
                    <option value="dongguan">dongguan servers</option>
                    <option value="fuzhou">fuzhou servers</option>
                    <option value="guangzhou">guangzhou servers</option>
                    <option value="hangzhou">hangzhou servers</option>
                    <option value="huhehaote">huhehaote servers</option>
                    <option value="nanchang">nanchang servers</option>
                    <option value="nanning">nanning servers</option>
                    <option value="shanxiyidong">shanxiyidong servers</option>
                    <option value="shenyang">shenyang servers</option>
                    <option value="shijiazhuang">shijiazhuang servers</option>
                    <option value="taiyuan">taiyuan servers</option>
                    <option value="tianjin">tianjin servers</option>
                    <option value="wuxi">wuxi servers</option>
                    <option value="xian">xian servers</option>
                    <option value="zhejiangyidong">zhejiangyidong servers</option>
                    <option value="zhengzhou">zhengzhou servers</option>
                </select>
                <input type="text" class="input-small" data-provide="typeahead" data-source='["cmd.run_stderr","cmd.run","cmd.exec_code","state.sls","state.highstate"]' value='cmd.run' name="fun">
                <input type="text" class="input-max" value="uptime" name='arg'>
                <button type="button" class="btn" id="execute">Enter</button>
           </form>
    </div>
</div>
<hr/>
<div class='row-fluid' id='instances'>
</div>
<div class='row-fluid' id='dialog'>
</div>
{% endblock %}
{% block bodyreboot %}
<style>
.fs20 {
   font-size: 20px;
}
.torange {
        color: #666600;
}
.cut-line {
        color: #D6D6D6;
        margin: 0 5px;
}
    color: #666666;
    float: left;
    font-weight: normal;
    overflow: hidden;
    padding: 2px 18px 6px 0;
    text-align: right;
    width: 200px;
    font-size:14px;
}
.common-loading-img {
    left: 50%;
    margin: -64px 0 0 -64px;
    position: absolute;
    top: 50%;
    z-index: 9999;
}

</style>
<script>
$(function(){
  $("#execute-testping").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/testping",
          data : $("#form-execute-reboot").serialize(),
          success: function(data){
              $("#instances-reboot").html(data);
          }
      });
  })

  $("#execute-reboot-HA").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/rebootha",
          data : $("#form-execute-reboot").serialize(),
          success: function(data){
              $("#instances-reboot").html(data);
          }
      });
  })

  $("#execute-reboot-NGINX").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/rebootnginx",
          data : $("#form-execute-reboot").serialize(),
          success: function(data){
              $("#instances-reboot").html(data);
          }
      });
  })

  $("#execute-reload-NGINX").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/reloadnginx",
          data : $("#form-execute-reboot").serialize(),
          success: function(data){
              $("#instances-reboot").html(data);
          }
      });
  })

})
</script>
<div class='row'>
    <div class='span10'>
            <form class="form-inline" id="form-execute-reboot" style="margin-bottom:0;">{% csrf_token %}
                <select id="ide" name="id-reboot">
                    <option value="waiwei" selected="selected">all waiwei servers</option>
                    <option value="hexin">all hexin servers</option>
                    <option value="changsha">changsha servers</option>
                    <option value="dongguan">dongguan servers</option>
                    <option value="fuzhou">fuzhou servers</option>
                    <option value="guangzhou">guangzhou servers</option>
                    <option value="hangzhou">hangzhou servers</option>
                    <option value="huhehaote">huhehaote servers</option>
                    <option value="nanchang">nanchang servers</option>
                    <option value="nanning">nanning servers</option>
                    <option value="shanxiyidong">shanxiyidong servers</option>
                    <option value="shenyang">shenyang servers</option>
                    <option value="shijiazhuang">shijiazhuang servers</option>
                    <option value="taiyuan">taiyuan servers</option>
                    <option value="tianjin">tianjin servers</option>
                    <option value="wuxi">wuxi servers</option>
                    <option value="xian">xian servers</option>
                    <option value="zhejiangyidong">zhejiangyidong servers</option>
                    <option value="zhengzhou">zhengzhou servers</option>
                </select>
                <button type="button" class="btn" id="execute-testping">test.ping</button>
                <button type="button" class="btn" id="execute-reboot-HA">重启HA</button>
                <button type="button" class="btn" id="execute-reboot-NGINX">重启HA_NGINX</button>
                <button type="button" class="btn" id="execute-reload-NGINX">重载NGINX配置文件</button>
           </form>
    </div>
</div>
<hr/>
<div class='row-fluid' id='instances-reboot'>
</div>
<div class='row-fluid' id='dialog-reboot'>
</div>
{% endblock %}

{% block bodyfileupdate %}
<style>
.fs20 {
   font-size: 20px;
}
.torange {
        color: #666600;
}
.cut-line {
        color: #D6D6D6;
        margin: 0 5px;
}
    color: #666666;
    float: left;
    font-weight: normal;
    overflow: hidden;
    padding: 2px 18px 6px 0;
    text-align: right;
    width: 200px;
    font-size:14px;
}
.common-loading-img {
    left: 50%;
    margin: -64px 0 0 -64px;
    position: absolute;
    top: 50%;
    z-index: 9999;
}

</style>
<script>
$(function(){
  $("#execute-HA-fileupdate").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/hafileupdate",
          data : $("#form-fileupdate").serialize(),
          success: function(data){
              $("#instances-fileupdate").html(data);
          }
      });
  })

  $("#execute-NGINX-fileupdate").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/nginxfileupdate",
          data : $("#form-fileupdate").serialize(),
          success: function(data){
              $("#instances-fileupdate").html(data);
          }
      });
  })
  $("#execute-replace-HA-configure-file").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/replacehaconf",
          data : $("#form-fileupdate").serialize(),
          success: function(data){
              $("#instances-fileupdate").html(data);
          }
      });
  })
  $("#execute-replace-NGINX-configure-file").click(function(){
  
      $.ajax({
          type: "POST",
          url: "/replacenginxconf",
          data : $("#form-fileupdate").serialize(),
          success: function(data){
              $("#instances-fileupdate").html(data);
          }
      });
  })

})
</script>
<div class='row'>
    <div class='span10'>
            <form class="form-inline" id="form-fileupdate" style="margin-bottom:0;">{% csrf_token %}
                <select id="ide" name="id-fileupdate">
                    <option value="waiwei" selected="selected">all waiwei servers</option>
                    <option value="hexin">all hexin servers</option>
                    <option value="changsha">changsha servers</option>
                    <option value="dongguan">dongguan servers</option>
                    <option value="fuzhou">fuzhou servers</option>
                    <option value="guangzhou">guangzhou servers</option>
                    <option value="hangzhou">hangzhou servers</option>
                    <option value="huhehaote">huhehaote servers</option>
                    <option value="nanchang">nanchang servers</option>
                    <option value="nanning">nanning servers</option>
                    <option value="shanxiyidong">shanxiyidong servers</option>
                    <option value="shenyang">shenyang servers</option>
                    <option value="shijiazhuang">shijiazhuang servers</option>
                    <option value="taiyuan">taiyuan servers</option>
                    <option value="tianjin">tianjin servers</option>
                    <option value="wuxi">wuxi servers</option>
                    <option value="xian">xian servers</option>
                    <option value="zhejiangyidong">zhejiangyidong servers</option>
                    <option value="zhengzhou">zhengzhou servers</option>
                </select>
                <button type="button" class="btn" id="execute-HA-fileupdate">下发HA配置文件</button>
                <button type="button" class="btn" id="execute-NGINX-fileupdate">下发NGINX配置文件</button>
                <button type="button" class="btn" id="execute-replace-HA-configure-file">替换HA配置文件</button>
                <button type="button" class="btn" id="execute-replace-NGINX-configure-file">替换NGINX配置文件</button>
           </form>
    </div>
</div>
<hr/>
<div class='row-fluid' id='instances-fileupdate'>
</div>
<div class='row-fluid' id='dialog-fileupdate'>
</div>
{% endblock %}
                         
